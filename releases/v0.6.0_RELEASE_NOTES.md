# Release Notes - v0.6.0

**Release Date:** January 18, 2026
**Type:** Major Feature Release - Nutrition Intelligence & Calorie Forecasting
**Code Added:** 400+ lines
**Code Modified:** 200+ lines across 3 files

---

## üöÄ Overview

Version 0.6.0 introduces **nutrition intelligence and calorie forecasting** - a comprehensive system for predicting your daily energy needs and planning macronutrient intake based on your activity patterns.

This release empowers you to:
- Forecast calorie needs (TDEE) for the upcoming week
- Choose from 9 nutrition styles OR set custom carb limits
- Get personalized macro targets based on your approach
- Analyze weekly calorie expenditure patterns
- Make data-driven nutrition decisions

---

## ‚ú® New Features

### 1. üçΩÔ∏è Calorie Needs Prediction (NEW)

**Module:** `calorie_forecast.py` (300+ lines)
**Tool:** `predict_calorie_needs`

Advanced TDEE (Total Daily Energy Expenditure) forecasting using Oura activity data and personal metrics.

**Features:**
- **BMR Calculation:** Mifflin-St Jeor equation using weight, height, age, sex
- **TDEE Forecasting:** 7-day predictions based on activity patterns
- **Weekly Pattern Analysis:** Day-of-week calorie expenditure patterns
- **Trend Detection:** Identifies increasing, decreasing, or stable energy needs
- **Confidence Scoring:** High/Medium/Low confidence based on data availability

**Technical Implementation:**
```python
# Calculate BMR using Mifflin-St Jeor equation
bmr = 10 * weight_kg + 6.25 * height_cm - 5 * age_years
# Add sex-specific adjustment (+5 for male, -161 for female)

# Use actual Oura data for precise TDEE
tdee = activity_data['total_calories']  # From Oura API

# Forecast using weekly patterns
weekly_pattern = analyze_day_of_week_patterns(activity_history)
predicted_tdee = weekly_pattern[weekday]
```

**Example Query:**
```
"Predict my calorie needs for the next 7 days with max 30g carbs"
```

**Example Output:**
```
# üçΩÔ∏è Calorie Needs Prediction (7 days)

**Based on:** Last 30 days of activity data
**Macro Strategy:** Custom (Max 30g carbs/day)

## üìä Your Baseline Metrics

**Basal Metabolic Rate (BMR):** 1,850 cal/day
**Average TDEE (last 30 days):** 2,400 cal/day
**Range:** 2,100 - 2,700 cal/day
**Variability:** ¬±150 calories

‚û°Ô∏è **Trend:** Your calorie expenditure is stable

## üîÆ Daily Calorie Needs Forecast

### Monday, January 20
**Predicted TDEE:** 2,411 calories üí™
**Activity Level:** Light
**Confidence:** üü¢ High

**Macro Targets:**
  - Protein: 181g (30%)
  - Carbs: 30g (5%) ‚ö†Ô∏è at limit
  - Fat: 187g (70%)
```

---

### 2. üéØ Flexible Macro Planning (NEW)

**9 Predefined Nutrition Styles:**

| Style | Protein | Carbs | Fat | Use Case |
|-------|---------|-------|-----|----------|
| **Balanced** | 30% | 40% | 30% | General health |
| **Keto** | 25% | 5% | 70% | Ketogenic diet |
| **Low Carb** | 30% | 20% | 50% | Moderate low carb |
| **Carnivore** | 35% | 0% | 65% | Animal-based |
| **Paleo** | 30% | 30% | 40% | Whole foods |
| **High Protein** | 40% | 35% | 25% | Muscle building |
| **Athlete** | 25% | 50% | 25% | Endurance performance |
| **Mediterranean** | 20% | 45% | 35% | Med diet |
| **Zone** | 30% | 40% | 30% | Zone diet (40/30/30) |

**OR Custom Carb Limits:**
```python
# Set your own max carbs in grams
predict_calorie_needs(max_carbs_g=30)  # Very low carb
predict_calorie_needs(max_carbs_g=50)  # Keto range
predict_calorie_needs(max_carbs_g=100) # Low carb
```

**Smart Macro Calculation:**
- Protein: Fixed at 30% of calories (adjustable)
- Carbs: Capped at your specified limit
- Fat: Fills remaining calories
- Warning indicator when carb limit is reached

---

### 3. üìà Calorie Insights & Analysis (NEW)

**Trend Analysis:**
- Detects increasing/decreasing energy expenditure
- Week-over-week comparison
- Identifies weekday vs weekend patterns

**Example Insights:**
```
### üìà Increased Energy Needs Expected
Your calorie needs are predicted to increase by ~150 cal/day.
**Action:** Consider increasing food intake to support higher activity levels.

### üíº More Active Weekdays
You burn ~200 more calories during the week.
**Tip:** Consider lighter meals on weekends to match lower activity.
```

---

## üõ†Ô∏è Technical Details

### New Files
- `src/oura_mcp/utils/calorie_forecast.py` (300+ lines)
  - `CalorieForecaster` class
  - BMR/TDEE calculations
  - Weekly pattern analysis
  - 9 nutrition style definitions
  - Custom carb limit calculator

### Modified Files
- `src/oura_mcp/tools/prediction_tools.py` (+100 lines)
  - `predict_calorie_needs()` method
  - Nutrition recommendation system
  - Macro calculation logic

- `src/oura_mcp/core/server.py` (+20 lines)
  - Tool registration
  - Parameter handling

---

## üìä API Changes

### New Tool: `predict_calorie_needs`

**Parameters:**
```json
{
  "days_ahead": 7,           // Number of days to forecast
  "nutrition_style": "keto", // Or: balanced, low_carb, carnivore, etc.
  "max_carbs_g": 30         // Optional: overrides nutrition_style
}
```

**Example Calls:**
```python
# Predefined style
predict_calorie_needs(days_ahead=7, nutrition_style="carnivore")

# Custom carb limit (more flexible!)
predict_calorie_needs(days_ahead=7, max_carbs_g=30)

# High carb athlete
predict_calorie_needs(days_ahead=5, nutrition_style="athlete")
```

---

## üéØ Use Cases

### 1. Low-Carb / Keto Tracking
```
"Predict my calorie needs with max 30g carbs per day"
```
‚Üí Get precise macro targets that respect your carb limit

### 2. Carnivore / Animal-Based
```
"Show me next week's TDEE with carnivore macros"
```
‚Üí 35% protein, 0% carbs, 65% fat distribution

### 3. Athletic Performance
```
"Calculate my calorie needs with athlete macros for race week"
```
‚Üí Higher carbs (50%) for endurance performance

### 4. Flexible Dieting
```
"What are my macro targets if I limit carbs to 50g?"
```
‚Üí Custom distribution based on your exact preference

---

## üî¨ Scientific Basis

**BMR Calculation:**
- Uses **Mifflin-St Jeor equation** (most accurate modern formula)
- Accounts for weight, height, age, and biological sex
- More accurate than older Harris-Benedict equation

**TDEE Calculation:**
- Prioritizes **actual Oura data** (total_calories from API)
- Falls back to BMR + activity multiplier if needed
- Weekly pattern analysis for day-specific predictions

**Macro Distribution:**
- Protein: 4 calories per gram
- Carbohydrates: 4 calories per gram
- Fat: 9 calories per gram

---

## üìù Example Scenarios

### Scenario 1: Strict Keto (30g carbs/day)
```
Input: max_carbs_g=30
TDEE: 2,400 cal

Output:
- Protein: 180g (30%, 720 cal)
- Carbs: 30g (5%, 120 cal)  ‚ö†Ô∏è at limit
- Fat: 173g (65%, 1,560 cal)
```

### Scenario 2: Moderate Low Carb (100g carbs/day)
```
Input: max_carbs_g=100
TDEE: 2,400 cal

Output:
- Protein: 180g (30%, 720 cal)
- Carbs: 100g (17%, 400 cal)
- Fat: 142g (53%, 1,280 cal)
```

### Scenario 3: Athlete Pre-Race
```
Input: nutrition_style="athlete"
TDEE: 2,800 cal

Output:
- Protein: 175g (25%, 700 cal)
- Carbs: 350g (50%, 1,400 cal)
- Fat: 78g (25%, 700 cal)
```

---

## üé® User Experience Improvements

### Clear Macro Display
- Grams AND percentages shown
- Warning when carb limit is reached
- Consistent formatting across predictions

### Confidence Indicators
- üü¢ High: 14+ days of data
- üü° Medium: 7-13 days of data
- üî¥ Low: <7 days of data

### Activity Level Labels
- Very Active (score ‚â•85)
- Active (score ‚â•70)
- Moderate (score ‚â•55)
- Light (score ‚â•40)
- Sedentary (score <40)

---

## üîÑ Migration Notes

**No Breaking Changes**
- All existing tools remain unchanged
- New tool is fully independent
- Optional parameters have sensible defaults

**New Dependencies**
- None (uses existing libraries)

---

## üêõ Known Limitations

1. **Personal Info Required:** Defaults to 70kg, 170cm, 30y, male if personal info unavailable
2. **Minimum Data:** Requires at least 7 days of activity data
3. **Carb Precision:** Custom carb limits round to nearest gram
4. **TDEE Source:** Accuracy depends on Oura's total_calories data quality

---

## üìö Documentation Updates

- ‚úÖ README.md updated with nutrition intelligence section
- ‚úÖ New example queries added
- ‚úÖ Roadmap updated to v0.6.0
- ‚úÖ Documentation links added

---

## üôè Acknowledgments

Developed based on:
- **Mifflin-St Jeor equation** (1990) - BMR calculation standard
- **Oura Ring API v2** - Activity and personal data
- User feedback requesting flexible macro planning

---

## üîÆ What's Next?

**Future Enhancements (v0.7.0+):**
- Meal timing recommendations based on chronotype
- Protein distribution optimization (breakfast/lunch/dinner)
- Nutrient density scoring
- Food sensitivity correlation with Oura metrics
- Integration with supplement analysis for timing optimization

---

## üì¶ Installation & Upgrade

**Fresh Install:**
```bash
git clone <repo>
pip install -r requirements.txt
export OURA_ACCESS_TOKEN="your_token"
python main.py
```

**Upgrade from v0.5.0:**
```bash
git pull
# No new dependencies required
python main.py
```

---

## üéØ Quick Start

### Try It Now!

**Basic Prediction:**
```
"Predict my calorie needs for next week"
```

**With Custom Carbs:**
```
"Show my TDEE forecast with max 30g carbs per day"
```

**With Nutrition Style:**
```
"Calculate my calorie needs using carnivore macros"
```

---

## üìä Statistics

- **Lines of Code Added:** 400+
- **Lines of Code Modified:** 200+
- **New Files:** 1
- **Modified Files:** 3
- **New Tool:** 1
- **Nutrition Styles Supported:** 9
- **Test Coverage:** Syntax validated

---

## üí° Key Takeaways

1. **Flexible Macro Planning:** Choose predefined styles OR set custom carb limits
2. **Data-Driven Forecasts:** Uses your actual Oura activity patterns
3. **Weekly Intelligence:** Understands day-of-week variations
4. **Personalized Targets:** Adapts to your individual energy expenditure
5. **Scientific Foundation:** Based on validated BMR/TDEE formulas

---

**Version 0.6.0 makes the Oura MCP Server your personal nutrition planning assistant!** üçΩÔ∏èüí™

---

*Released: January 18, 2026*
*Oura MCP Server v0.6.0*
